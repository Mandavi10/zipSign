
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<style>
    .givenheight {
        height: 81vh;
    }

    .drop-zone {
        width: 460px;
        height: 250px;
        padding: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        font-family: Roboto-Medium;
        font-size: 20px;
        cursor: pointer;
        color: #cccccc;
        border: 1px dashed #e2e2e2;
        border-radius: 10px;
    }

    .viewzone {
        max-width: 250px;
        height: 200px;
        align-items: center;
        justify-content: center;
        text-align: center;
        font-weight: 500;
        font-size: 14px;
        color: #cccccc;
        border: 1px solid #e2e2e2;
        border-radius: 10px;
    }

    .drop-zone--over {
        border-style: solid;
    }

    .drop-zone__input {
        display: none;
    }

    .drop-zone__thumb {
        width: 100%;
        height: 100%;
        border-radius: 10px;
        overflow: hidden;
        background-color: #cccccc;
        background-size: cover;
        position: relative;
    }

        .drop-zone__thumb::after {
            content: attr(data-label);
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 5px 0;
            color: #ffffff;
            background: rgba(0, 0, 0, 0.75);
            font-size: 14px;
            text-align: center;
        }

    .delete {
        position: absolute;
        top: 25px;
        right: -207px;
        font-weight: 600;
        font-size: 16px;
        color: #ed3d3d;
        z-index: 999;
        background: transparent;
        border: none;
    }

    .signerdiv {
        /*       border: 1px solid #dfdfdf;*/
        border-radius: 0.25rem;
        /*        margin-bottom: 5px;*/
        /*     cursor: move;*/
        position: relative;
    }

    .columns {
        padding-left: 0px;
        margin-bottom: 0px;
        padding-bottom: 0px;
    }

        .columns li {
            list-style: none;
        }

    .txtsign {
        font-family: Roboto-Medium;
    }

    .draggable {
        position: absolute;
        right: 8px;
        top: 5px;
    }

    .excl {
        padding-left: 5px;
        padding-top: 3px;
    }

    .signerdiv .form-group {
        margin: 0px 0px 0px 0px;
    }

    .numdiv {
        /*     height: 60px;*/
        padding: 10px 11px 0px;
        font-size: 13px;
        font-family: 'Roboto-Bold';
        margin-bottom: 5px;
    }

    .simgdiv {
        height: 160px;
        overflow: hidden;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
    }

        .simgdiv img {
            width: 100%;
        }

    .snamediv {
        height: 40px;
        background-color: #fff;
        box-shadow: 0px 1px 5px 3px #cdcdcd;
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
        overflow: hidden;
    }


        .snamediv label {
            margin: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 200px;
            color: #323A45;
            font-weight: 700;
        }

    .fullimgofdoc {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0px;
        background-color: #000;
        opacity: 0.5;
        display: none;
    }

    .simgdiv:hover .fullimgofdoc {
        display: block;
    }

    .fullimgofdoc button {
        margin: 75px auto;
    }

    .viewbtn {
        border: 1px solid #fff;
        color: #fff;
        background-color: transparent;
        padding: 4px 10px;
        font-weight: 700;
    }

    .hiveimgdiv {
        top: -5px;
    }

    .largeimgdiv {
        overflow: hidden;
        height: 76vh;
    }

        .largeimgdiv img {
            width: 100%;
        }

    #docimage .modal-dialog {
        max-width: 1024px !important;
    }

    #viewFile {
        padding: 4px 7px;
    }

    .suggestions-list {
        max-height: 110px !important;
        width: auto !important;
        margin-top: 5px;
        border-radius: 4px;
        padding-left: 15px;
        padding-right: 20px;
        padding-top: 6px;
        padding-bottom: 6px;
    }



    .cross {
        position: absolute;
        right: -2px;
        font-size: 15px;
        color: #fff;
        font-weight: 600;
        top: 0px;
        cursor: pointer;
        background-color: #d73131;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        text-align: center;
        line-height: 16px;
        z-index: 99;
        display: none;
    }

    .addedimgdiv:hover .cross {
        display: block;
    }

    .addedimgdiv {
        margin-top: 20px;
    }

    .titletxt {
        font-family: Roboto-Bold;
        padding-bottom: 15px;
        font-size: 15px;
    }

    .alermsg {
        color: #de4848;
        font-size: 0.9em;
        margin-top: 3px;
    }

    .calledimg {
        width: 100%;
        height: 70px;
        border: 1px solid #cdcdcd;
        overflow: hidden;
        position: relative;
        cursor: pointer;
    }

        .calledimg img {
            width: 100%;
        }

    .crossfrimg {
        position: absolute;
        right: 2px;
        top: 3px;
        cursor: pointer;
        color: #ff3f3f;
        font-size: 14px;
        z-index: 99;
    }

    /*    .fixeddiv {
            position: fixed;
            right: 32px;
            bottom: 25px;
        }
    */
    .overflowdiv {
        overflow: auto;
        height: 157px;
    }

    .overlayinmodal {
        position: absolute;
        width: 96.2%;
        height: 30px;
        background-color: #000;
        bottom: 16px;
        opacity: 0.8;
        color: #fff;
    }

    .lowfw {
        font-weight: 400;
    }

    .highfw {
        font-family: Roboto-Bold;
    }

    .delbtn {
        position: absolute;
        right: 8px;
        top: 11px;
        color: #f33434;
        cursor: pointer;
    }

    input::-webkit-calendar-picker-indicator {
        display: none !important;
    }


    /*signature request*/

    .signdiv {
        position: fixed;
        width: 100%;
        height: 100%;
        background-color: #fff;
        z-index: 9999;
        left: 0px;
    }

    .leftimgdiv {
        max-height: 80vh;
        width: 100%;
        overflow-y: auto;
    }

        .leftimgdiv img {
            width: 100%;
        }

    .signersList {
        margin-bottom: 20px;
    }

    #SignImage {
        width: 95%
    }

    #viewRecipients .modal-dialog {
        max-width: 1024px !important;
    }

    #column img {
        z-index: 99;
    }

    #column {
        z-index: 9999;
    }

    .calledimg {
        background: #edf1f3
    }

        .calledimg iframe html body img {
            width: 100%
        }

    .imageLarge {
        position: absolute;
        width: 128px;
        height: 72px;
        z-index: 9999;
        cursor: pointer;
    }

    #PreviewSignImage {
        width: 100%;
        height: 100%
    }
</style>


<div class="signdiv" style="display:none">
    <div class="row clearfix ">
        <div class="col-lg-12">
            <div class="card">
                <div class="block-header">
                    <div class="row pe-3 ps-3">

                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="page_action d-flex justify-content-between">
                                <button type="button" class="btn btn-light closesignerdiv"><i class="fa fa-angle-double-left"></i> Back</button>
                                @*<button type="button" class="btn btn-primary me-2"><i class="fa fa-ban"></i> Reject</button>*@
                                <button type="button" class="btn btn-primary"><i class="fa fa-download"></i> Download</button>
                            </div>


                        </div>
                    </div>
                </div>
                <div class="body">

                    <div class="row clearfix ps-3">


                        <div class="col-lg-5 col-md-12 p-0">

                            <div class="col-md-12 form-group">
                                <label for="text-input2">Signature Type</label>
                                <div class="c_multiselect">
                                    <select name="single_selection" class="form-control" id="ddlType">
                                        <option value="">Select</option>
                                        <option value="">Aadhaar eSign</option>
                                        <option value="">DSC eSign</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-12 col-sm-12 col-xs-12 bodybtn firstbtn ">
                                <div class="col-md-12 p-0 mt-2">
                                    <button type="button" class="btn btn-primary" style="width: 100%" disabled="" id="continueButton">Continue</button>
                                </div>
                            </div>
                            <div class="col-md-12">
                                @*<iframe id="column" src="" alt="Preview Image" style="height:64vh;width:100%"></iframe>*@
                            </div>

                        </div>
                        <div class="col-lg-7 col-md-12">
                            <div class="leftimgdiv firsthalfmdl">
                                @*<div class="signer">Signer  <span class="cross">x</span></div>*@
                                <img src="~/Content/images/document.png" />
                            </div>


                        </div>
                    </div>

                </div>


            </div>
        </div>
    </div>



</div>

<div class="container-fluid">
    <input type="text" id="hdnfilepath" hidden />
    <div class="block-header">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-12">
                <h2>Sign Document</h2>
                <ul class="breadcrumb">
                    <li class="breadcrumb-item">zipSign</li>
                    <li class="breadcrumb-item active">Upload</li>
                </ul>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12">
                <div class="d-flex flex-row-reverse">
                    <div class="page_action">
                        <!--<button type="button" class="btn btn-primary js-sweetalert" data-type="cancel"--> @*onclick="SignInsert()"*@ <!--id="btnsign"><i class="fa fa-check-square-o" aria-hidden="true"></i> Sign</button>-->
                    </div>
                    <div class="p-2 d-flex">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row clearfix">
        <div class="col-md-12">
            <div class="card">

                <div class="body givenheight">
                    <form id="advanced-form">
                        <div class="col-md-12">
                            <label class="titletxt">Upload Document</label>
                        </div>

                        <div class="col-md-12 d-flex">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="DocName" oninput="this.value = this.value.toUpperCase()">Document Name<sup class="impfld">*</sup></label>
                                    <div class="col-md-11">
                                        <input type="text" id="text-input1" required class="form-control" autocomplete="off">
                                        <div class="alermsg col-md-12 p-1" role="alert" id="message6" style="color:darkred"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="text-input2">Document Reference Number</label>
                                    <div class="col-md-11">
                                        <input type="text" id="text-input2" required class="form-control" @*onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))"*@ maxlength="12" autocomplete="off" />
                                        <div class="alermsg col-md-12 p-1" role="alert" id="message1" style="color:darkred"></div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 d-flex flex-wrap">

                            <div class="col-md-12 d-flex flex-wrap">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="text-input1">Upload File<sup class="impfld">*</sup></label>
                                        <div class="col-md-11 d-flex flex-wrap">
                                            <div class="col-md-10 col-12">
                                                <!--<input type="file" name="myFile" class="form-control" id="SignImage" onchange="UploadImages('SignImage', 'PreviewSignImage','column')" />-->
                                                @*<input id="SignImage" type="hidden" value="" />*@
                                                <!--<input id="ImageID" type="hidden" value="" />-->
                                                @*/*<input type="file" class="form-control">*/*@
                                                <input type="file" name="myFile" class="form-control" id="SignImage" onchange="UploadImages('SignImage', 'PreviewSignImage','column')" autocomplete="off" />
                                                <div class="col-md-12">
                                                    <div class="alermsg" role="alert" id="message">
                                                        @*Only files with following extensions are allowed: word, pdf, jpeg and png.*@
                                                    </div>
                                                    @*<div class="alermsg col-md-12 p-1" role="alert" id="message" style="font-size:15px"></div>*@
                                                </div>
                                            </div>
                                            <div class="col-md-2 col-12 position-relative">
                                                @*<i class="fa fa-trash crossfrimg"></i>*@
                                                @*<div class="imageLarge" data-bs-toggle="modal" data-bs-target="#docimage"></div>
                                                    <div class="calledimg">
                                                        <iframe id="column" src="" alt="Preview Image"></iframe>
                                                    </div>*@
                                                <button type="button" class="btn btn-primary ms-1" id="viewFile" data-bs-toggle="modal" data-bs-target="#docimage">View File</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="text-input2">Document Expire(in Days)</label>
                                        <div class="col-md-11">
                                            <input type="text" class="form-control " placeholder="" maxlength="3" id="ExpDate" onkeypress="return onlyNumbers(event)" onchange="CheckExpiryDate()" autocomplete="off">
                                            <div class="alermsg col-md-12 p-1" role="alert" id="message1" style="color:darkred"></div>
                                        </div>

                                    </div>
                                </div>
                            </div>


                        </div>

                        <div class="alermsg col-md-12 p-1" role="alert" id="message3" style="color:darkred;display:none"></div>

                        <div class="col-md-12">
                            <label class="titletxt">Add Signers<sup class="impfld">*</sup></label>
                        </div>
                        <div class="col-md-12 d-flex flex-wrap mb-2">
                            <label class="fancy-radio custom-color-green">
                                <input type="radio" name="control" required id="OnlySigner">
                                <span><i></i>I am the only signer</span>
                            </label>
                        </div>
                        <div class="col-md-12 d-flex flex-wrap mb-2 d-flex flex-wrap">
                            <div class="col-md-7 col-12">
                                <label class="fancy-radio custom-color-green">
                                    <input type="radio" name="control" required id="AddRecipient">
                                    <span><i></i>Add recipient</span>
                                </label>
                            </div>
                            <div class="recipientcheck col-md-5" style="display:none;">
                                <div class="d-flex flex-wrap">
                                    <div class="col-md-8 col-12 d-flex justify-content-end ">
                                        @*<label class="control-inline fancy-checkbox">
                                                <input type="checkbox" name="control" required data-parsley-mincheck="1" data-parsley-errors-container="#error-checkbox2" id="controlling">
                                                <span>Use from signing list</span>
                                            </label>*@
                                    </div>

                                    <div class="col-md-4 col-12 d-flex justify-content-end "><button type="button" class="actionbtn" id="MoreRecipient"> Add More Recipient</button></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 overflowdiv">
                            <input type="hidden" id="hiddena" />
                            <div class="appenddiv" id="RecipientDiv">

                            </div>
                           


                        </div>

                        @*<div class="col-md-12">
                                <button type="button" class="btn btn-primary"> Add More Recipient</button>
                            </div>*@

                        <div class="col-md-12 d-flex flex-wrap fixeddiv">
                            <div class="col-md-6">
                                <div class="alermsg col-md-12 p-1" role="alert" id="message" style="font-size:15px"></div>

                                @*<div class="alermsg col-md-12 p-1" role="alert" id="message" style="font-size:15px">sdfgndbhfjgdjfg jlk</div>*@
                            </div>
                            <div class="col-md-6 d-flex justify-content-end">
                                <button type="button" class="btn btn-primary me-1" id="viewrec" data-bs-toggle="modal" data-bs-target="#viewRecipients">View Recipients</button>
                                <button type="button" class="btn btn-primary" id="Proceed">Proceed</button>
                                <button type="button" class="btn btn-primary ms-1" @*data-bs-toggle="modal" data-bs-target="#successpopup"onclick="SignInsert();*@ id="SendLink">Send Link</button>

                                <button type="button" class="btn btn-primary ms-1" data-bs-toggle="modal" data-bs-target="#successpopup" id="ReSendLink" style="display:none">Resend Link</button>


                                @*<button type="button" class="btn btn-primary ms-1" data-bs-toggle="modal" data-bs-target="#successpopup" id="ReSendLink">Resend Link</button>*@


                            </div>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

</div>


<div class="modal fade" id="docimage" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Document</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body position-relative">
                <div class="largeimgdiv col-md-12 ">
                    @*<img src="~/Content/images/document.png" />*@
                    @*<img id="PreviewSignImage" src="~/Content/images/document.png" alt="Preview Image" />*@
                    <iframe id="PreviewSignImage" src="" alt="Preview Image"></iframe>
                    @*<object data="~/Content/images/document.png" id="PreviewSignImage" type="application/octet-stream">*@
                    @*<a href="~/Content/images/document.png" download>Download File</a>*@
                </div>
                <div class="overlayinmodal pt-1">
                    <div class="col-md-12 d-flex flex-wrap justify-content-around">
                        <div class="col-md-3">
                            <div class="form-group d-flex flex-wrap">
                                <div class="col-md-5 col-12">
                                    <label for="text-input1 highfw">Image Name:</label>
                                </div>
                                <div class="col-md-7">
                                    <label class="lowfw"></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group d-flex flex-wrap">
                                <div class="col-md-5 col-12">
                                    <label for="text-input1 highfw">Image Size:</label>
                                </div>
                                <div class="col-md-7">
                                    <label class="docsize"></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*<div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>*@
        </div>
    </div>
</div>

<div class="modal fade" id="Cautionpopup" tabindex="-1" role="dialog" aria-modal="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="title m-0" id="defaultModalLabel">Caution</h4>
            </div>
            <div class="modal-body pt-4 pb-4">
                <div class="col-12 text-center">
                    <label class="modcontxt">File format is wrong.</label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnok1" data-bs-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>


<!-- Modal to display the recipients data -->
<div class="modal fade" id="viewRecipients" tabindex="-1" role="dialog" aria-modal="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="title m-0" id="defaultModalLabel">View Recipients</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body pt-4 pb-4">
                <div class="col-md-12 col-xs-12 col-sm-12 p-0">
                    <div class="col-md-12 p-0">
                        <div class="col-md-12 col-sm-12 col-xs-12 p-0">
                            <div id="myGrid1" style="height: 74vh; width: 100%;" class="ag-theme-alpine"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="successpopup" tabindex="-1" role="dialog" aria-modal="true" style="display:none;">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="title m-0" id="defaultModalLabel">Success</h4>
            </div>
            <div class="modal-body pt-4 pb-4">
                <div class="col-12 text-center">
                    <label class="modcontxt">Request Sent Successfully.</label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnok" data-bs-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>


<script src="~/Content/js/jquery-3.6.4.min.js"></script>
<script src="~/JavaScript/Upload.js"></script>
<script src="~/JavaScript/Custom.js"></script>
<script src="~/Content/js/MyValidator.js"></script>






<script>
    $(document).ready(function () {
        $(".actionbtn").click(function () {
            $(".newapdiv").show();
        });
        $(".delbtn").click(function () {
            $(".newapdiv").hide();
        });

        $('.fullimgmodal').click(function () {
            $("#docimage").modal('show');
        });
    });
</script>
<script>
    function onlyNumbers(event) {
        var charCode = event.charCode || event.keyCode;
        if (charCode < 48 || charCode > 57 || charCode == 46 || charCode == 45) {
            event.preventDefault();
        }
    }
</script>
